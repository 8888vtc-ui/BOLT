CONFIGURATION COACH AI VIA NETLIFY FUNCTION

âœ… SOLUTION IMPLÃ‰MENTÃ‰E

Architecture:
Frontend â†’ Netlify Function â†’ Ollama Railway

Avantages:
- Appels Ollama depuis serveur (pas CORS)
- Variables d'environnement sÃ©curisÃ©es
- Meilleure gestion erreurs
- Pas de problÃ¨me mÃ©moire cÃ´tÃ© client

ðŸ“‹ CONFIGURATION NETLIFY

Ã‰tape 1: Variables d'Environnement Netlify
https://app.netlify.com/sites/botgammon/configuration/env

Ajouter:
OLLAMA_URL=https://bot-production-b9d6.up.railway.app
OLLAMA_MODEL=deepseek-coder:latest
DEEPSEEK_API_KEY=sk-votre_cle (optionnel)

Ã‰tape 2: DÃ©ployer Fonction Netlify
Fichier crÃ©Ã©: gurugammon-gnubg-api/netlify/functions/coach.ts

Push sur GitHub â†’ Netlify redÃ©ploie automatiquement

Ã‰tape 3: Configuration Frontend
Netlify: https://app.netlify.com/sites/gurugammon-react/configuration/env

Ajouter:
VITE_COACH_API_URL=https://botgammon.netlify.app/.netlify/functions/coach

ðŸ”„ ORDRE DE PRIORITÃ‰

1. Netlify Function (VITE_COACH_API_URL) - RECOMMANDÃ‰
2. Ollama Direct (VITE_OLLAMA_URL) - Fallback GRATUIT
3. DeepSeek API (VITE_DEEPSEEK_API_KEY) - Fallback Payant

ðŸ§ª TEST

Test Fonction:
curl -X POST https://botgammon.netlify.app/.netlify/functions/coach \
  -H "Content-Type: application/json" \
  -d '{"question": "Comment jouer un double 1?", "contextType": "rules"}'

Test Frontend:
1. Ouvrir jeu
2. Chat â†’ Poser question
3. VÃ©rifier console: "[AI Coach] Using Netlify Function (recommended)"

âœ… CHECKLIST

Backend (botgammon):
- [ ] OLLAMA_URL configurÃ©e
- [ ] OLLAMA_MODEL configurÃ©e
- [ ] DEEPSEEK_API_KEY configurÃ©e (optionnel)

Frontend (gurugammon-react):
- [ ] VITE_COACH_API_URL configurÃ©e

DÃ©ploiement:
- [ ] Fonction coach.ts dÃ©ployÃ©e
- [ ] Netlify redÃ©ployÃ©
- [ ] Test rÃ©ussi


